<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>إدارة المصروف والميزانيات</title>
  <link rel="stylesheet" href="main.css" />
  <link rel="stylesheet" href="themes.css" />
  <link rel="stylesheet" href="animations.css" />
</head>
<body class="theme-dark">
  <!-- Auth screen -->
  <div id="auth-screen" class="auth-wrapper">
    <div class="auth-card fade-in">
      <h2>تسجيل الدخول</h2>
      <p>اختر الحساب ثم أدخل PIN (إن لزم).</p>
      <input id="auth-pin-input" class="text-input" type="password" placeholder="PIN" />
      <div style="margin-top:8px;">
        <button id="auth-login-me" class="btn primary-btn">الحساب الرئيسي</button>
        <button id="auth-login-partner" class="btn neutral-btn">حساب الزوجة</button>
      </div>
    </div>
  </div>

  <!-- Main app -->
  <div id="app-shell" class="app-container hidden">
    <aside class="side-menu">
      <button class="side-link" data-screen="dashboard-screen">الصفحة الرئيسية</button>
      <button class="side-link" data-screen="transactions-screen">الدخل / المصروف</button>
      <button class="side-link" data-screen="bills-screen">الفواتير</button>
      <button class="side-link" data-screen="goals-screen">الأهداف والسنوي</button>
      <button class="side-link" data-screen="shopping-screen">المشتريات</button>
      <button class="side-link" data-screen="categories-screen">الفئات</button>
      <button class="side-link" data-screen="preferences-screen">الإعدادات</button>
    </aside>

    <main class="main">
      <!-- Dashboard -->
      <section id="dashboard-screen" class="screen">
        <div class="screen-header">
          <h2>الصفحة الرئيسية</h2>
        </div>
        <div class="card">
          <div class="card-title">ملخص الشهر الحالي</div>
          <div>إجمالي الدخل: <span id="dash-income">0</span></div>
          <div>إجمالي المصروف: <span id="dash-expense">0</span></div>
          <div>الصافي: <span id="dash-net">0</span></div>
        </div>
        <div class="card">
          <div class="card-title">حالة الميزانيات حسب الفئة</div>
          <div id="budget-summary"></div>
        </div>
      </section>

      <!-- Transactions -->
      <section id="transactions-screen" class="screen hidden">
        <div class="screen-header">
          <h2>الدخل والمصروف</h2>
        </div>
        <div class="card">
          <div class="card-title">إضافة دخل</div>
          <input id="income-amount" class="text-input" type="number" placeholder="المبلغ" />
          <select id="income-category" class="text-input category-select"></select>
          <input id="income-source" class="text-input" type="text" placeholder="المصدر (اختياري)" />
          <input id="income-note" class="text-input" type="text" placeholder="ملاحظة (اختياري)" />
          <button id="income-add-btn" class="btn primary-btn">حفظ الدخل</button>
        </div>
        <div class="card">
          <div class="card-title">إضافة مصروف</div>
          <input id="expense-amount" class="text-input" type="number" placeholder="المبلغ" />
          <select id="expense-category" class="text-input category-select"></select>
          <input id="expense-note" class="text-input" type="text" placeholder="ملاحظة (اختياري)" />
          <button id="expense-add-btn" class="btn primary-btn">حفظ المصروف</button>
        </div>
        <div class="card">
          <div class="card-title">آخر الحركات</div>
          <div id="transactions-list"></div>
        </div>
      </section>

      <!-- Bills -->
      <section id="bills-screen" class="screen hidden">
        <div class="screen-header">
          <h2>الفواتير</h2>
        </div>
        <div class="card">
          <div class="card-title">إضافة فاتورة</div>
          <input id="bill-name" class="text-input" type="text" placeholder="اسم الفاتورة" />
          <input id="bill-amount" class="text-input" type="number" placeholder="المبلغ" />
          <input id="bill-due" class="text-input" type="date" placeholder="تاريخ الاستحقاق" />
          <select id="bill-status" class="text-input">
            <option value="unpaid">غير مدفوعة</option>
            <option value="paid">مدفوعة</option>
          </select>
          <label>
            <input type="checkbox" id="bill-is-monthly" /> فاتورة شهرية
          </label>
          <label>
            <input type="checkbox" id="bill-auto-renew" /> تجديد تلقائي شهري
          </label>
          <button id="bill-add-btn" class="btn primary-btn">حفظ الفاتورة</button>
        </div>
        <div class="card">
          <div class="card-title">الفواتير الحالية</div>
          <div id="bills-list"></div>
        </div>
      </section>

      <!-- Goals & yearly -->
      <section id="goals-screen" class="screen hidden">
        <div class="screen-header">
          <h2>الأهداف والسنوي</h2>
        </div>
        <div class="card">
          <div class="card-title">إضافة هدف مالي</div>
          <input id="goal-name" class="text-input" type="text" placeholder="اسم الهدف" />
          <input id="goal-target" class="text-input" type="number" placeholder="الهدف المالي" />
          <input id="goal-note" class="text-input" type="text" placeholder="ملاحظة (اختياري)" />
          <button id="goal-add-btn" class="btn primary-btn">حفظ الهدف</button>
        </div>
        <div class="card">
          <div class="card-title">إضافة بند سنوي</div>
          <input id="yearly-name" class="text-input" type="text" placeholder="اسم البند" />
          <input id="yearly-amount" class="text-input" type="number" placeholder="المبلغ السنوي" />
          <button id="yearly-add-btn" class="btn primary-btn">حفظ البند السنوي</button>
        </div>
        <div class="card">
          <div class="card-title">الأهداف</div>
          <div id="goals-list"></div>
        </div>
        <div class="card">
          <div class="card-title">البنود السنوية</div>
          <div id="yearly-list"></div>
        </div>
      </section>

      <!-- Shopping -->
      <section id="shopping-screen" class="screen hidden">
        <div class="screen-header">
          <h2>المشتريات</h2>
        </div>
        <div class="card">
          <div class="card-title">إضافة عنصر</div>
          <div class="inline-form">
            <input id="shopping-item-input" class="text-input" type="text" placeholder="اسم العنصر" />
            <select id="shopping-item-category" class="text-input category-select"></select>
            <input id="shopping-item-note" class="text-input" type="text" placeholder="ملاحظة (اختياري)" />
            <button id="shopping-add-btn" class="btn primary-btn">إضافة</button>
          </div>
        </div>
        <div class="card">
          <div class="card-title">قائمة المشتريات</div>
          <div id="shopping-list"></div>
        </div>
      </section>

      <!-- Categories -->
      <section id="categories-screen" class="screen hidden">
        <div class="screen-header">
          <h2>الفئات والميزانيات</h2>
        </div>
        <div class="card">
          <div class="card-title">الفئات الحالية</div>
          <div id="categories-table"></div>
        </div>
        <div class="card">
          <div class="card-title">إضافة فئة جديدة</div>
          <div class="inline-form">
            <input id="new-category-name" class="text-input" type="text" placeholder="اسم الفئة" />
            <input id="new-category-budget" class="text-input" type="number" placeholder="ميزانية شهرية (اختياري)" />
            <button id="add-category-btn" class="btn primary-btn">إضافة فئة</button>
            <button id="save-categories-btn" class="btn neutral-btn">حفظ التغييرات</button>
          </div>
        </div>
      </section>

      <!-- Preferences -->
      <section id="preferences-screen" class="screen hidden">
        <div class="screen-header">
          <h2>الإعدادات</h2>
        </div>
        <div class="card">
          <div class="card-title">المظهر والسلوك</div>
          <label class="block-label">الثيم</label>
          <select id="pref-theme" class="text-input">
            <option value="dark">داكن</option>
            <option value="light">فاتح</option>
          </select>

          <label class="block-label">تأكيد الحذف</label>
          <select id="pref-delete-confirm" class="text-input">
            <option value="on">مفعل</option>
            <option value="off">مغلق</option>
          </select>
        </div>

        <div class="card">
          <div class="card-title">إعدادات PIN</div>
          <label class="block-label">طلب PIN للحساب الرئيسي</label>
          <select id="pref-pin-me" class="text-input">
            <option value="on">مطلوب</option>
            <option value="off">غير مطلوب</option>
          </select>

          <label class="block-label">طلب PIN لحساب الزوجة</label>
          <select id="pref-pin-partner" class="text-input">
            <option value="on">مطلوب</option>
            <option value="off">غير مطلوب</option>
          </select>

          <label class="block-label">تغيير PIN للحساب الرئيسي</label>
          <input id="pref-new-pin-me" class="text-input" type="password" placeholder="PIN جديد (اختياري)" />

          <label class="block-label">تغيير PIN لحساب الزوجة</label>
          <input id="pref-new-pin-partner" class="text-input" type="password" placeholder="PIN جديد (اختياري)" />

          <button id="pref-pin-save-btn" class="btn primary-btn">حفظ إعدادات PIN</button>
        </div>

        <div class="card">
          <div class="card-title">رابط GAS (Backend)</div>
          <input id="pref-gas-url" class="text-input" type="text" placeholder="الصق رابط الويب آب من Google Apps Script" />
        </div>
      </section>
    </main>
  </div>

  <script src="state.js"></script>
  <script src="themes.js"></script>
  <script src="gas-api.js"></script>
  <script src="auth.js"></script>
  <script src="ui.js"></script>
  <script src="categories.js"></script>
  <script src="transactions.js"></script>
  <script src="charts.js"></script>
  <script src="bills.js"></script>
  <script src="shopping.js"></script>
  <script src="goals.js"></script>
  <script src="preferences.js"></script>
  <script src="notifications.js"></script>
</body>
</html>
